<!DOCTYPE html>
<html>
<!--HEAD---------------------------------------------------------------------------------------------------->
<head>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Weather App</title>
     <link rel="stylesheet" href="style.css">
</head>


<!--BODY---------------------------------------------------------------------------------------------------->
<body>
    <div class="Card-Wrapper">
        <div class="Search-Wrapper">
            <input type="text" class="City-InputField" placeholder="enter city name" spellcheck="false">
            <button class="Search-Button"><image class="Search-Icon" src="images/search.png"></button>
        </div>

        <div class="ErrorMessage-Wrapper">
            <p class="ErrorMessage-Paragraph">invalid city name</p>
        </div>

        <div class="WeatherInfo-Wrapper">
            <img class="Weather-Icon" src="images/rain.png">
            <h1 class="Temperature-H1">22°C</h1>
            <h2 class="City-H2">New York</h2>

            <div class="Details-Wrapper">
                
                <div class="DataColumn">
                    <img class="Humidity-Image" src="images/humidity.png">
                        <div>
                            <p class="Humidity-Label"> HUMIDITY </p>
                            <p class="Humidity-Value">50%</p>                      
                        </div>
                </div>
                 
                <div class="DataColumn">
                    <img class="Wind-Image" src="images/wind.png">
                        <div>
                            <p class="Wind-Label"> WIND </p>
                            <p class="Wind-Value">15</p>                        
                        </div>
                </div>
            </div> <!--Details-Wrapper END-->
        </div>
    </div> <!--Card-Wrapper END-->


<!--SCRIPT---------------------------------------------------------------------------------------------------->
<script>
    const ApiKey ="1a3d0fabcb11e871c50245693ab452e1";
    const ApiUrl = "https://api.openweathermap.org/data/2.5/weather?units=metric&q=";

    const SearchWrapper = document.querySelector(".Search-Wrapper input");
    const SearchButton = document.querySelector(".Search-Wrapper button");
    const WeatherIcon = document.querySelector(".Weather-Icon");


    async function CheckWeather(City)
    {
        const response = await fetch(ApiUrl + City + `&appid=${ApiKey}`);
        if(response.status == 404)
        {
            document.querySelector(".ErrorMessage-Wrapper").style.display = "flex";
            document.querySelector(".WeatherInfo-Wrapper").style.display = "none";
        }

        else
        {
            var WeatherData = await response.json();
            console.log(WeatherData);

            document.querySelector(".City-H2").innerHTML = WeatherData.name;
            document.querySelector(".Temperature-H1").innerHTML = Math.round(WeatherData.main.temp)+"°C";
            document.querySelector(".Humidity-Value").innerHTML = WeatherData.main.humidity+"%";
            document.querySelector(".Wind-Value").innerHTML = Math.round(WeatherData.wind.speed)+"kmh";

            if(WeatherData.weather[0].main == "Clouds")
                {WeatherIcon.src = "images/clouds.png";}
            else if(WeatherData.weather[0].main == "Clear")
                {WeatherIcon.src = "images/clear.png";}
            else if(WeatherData.weather[0].main == "Rain")
                {WeatherIcon.src = "images/rain.png";}
            else if(WeatherData.weather[0].main == "Drizzle")
                {WeatherIcon.src = "images/drizzle.png";}
            else if(WeatherData.weather[0].main == "Mist")
                {WeatherIcon.src = "images/mist.png";}

            document.querySelector(".WeatherInfo-Wrapper").style.display = "block";
            document.querySelector(".ErrorMessage-Wrapper").style.display = "none";

        }
    }


    SearchButton.addEventListener
    (
        "click", ()=>
        {
            CheckWeather(SearchWrapper.value);
        }
    )
</script>


</body>
</html>